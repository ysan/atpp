[todo list]
--------------------------------------------------------------------
pmt,emm,ecmの処理
--------------------------------------------------------------------
tuner serviceの存在が見えてきた
--------------------------------------------------------------------
ts_parser_test main.cpp に TsParser_test.cppを統合
--------------------------------------------------------------------
adaptation_fieldの処理
--------------------------------------------------------------------
psisi structs のclear関数 必要かどうか
--------------------------------------------------------------------
requestOptionで重複キューチェック
--------------------------------------------------------------------
EPG 結果をjsonにほぞんしたい
--------------------------------------------------------------------
psisi mgrの m_tunerIsTunedはpsisi stateと同等になった  m_tunerIsTunedの名前変えた方がいい
--------------------------------------------------------------------
ＮＨＫ総合１・東京のEIT p/f のpが たまにcacheできてない問題
--------------------------------------------------------------------
channel scanで放送休止中のchannelがあると失敗する問題
そもそも放送休止中だと選局できない
--------------------------------------------------------------------
rec manager とrec reserveを切り離す
--------------------------------------------------------------------
選局時のpat cacheが前のstreamの分が残ってしまう
選局完了から200ms待ちがたりない？
＊pmt cacheも最新patから見た方がいい
--------------------------------------------------------------------
EIT_H_pfにおいてcomp_flag １つでは通用しない p/fで別テーブル serviceでも別テーブルに分かれる
通常は複数の parser_notice 通知があると考えたいけど
それが１つのtsパケットに入る場合もあるから 通知の数が合わない場合もある
--------------------------------------------------------------------
CTunerControlIf::ITsReceiveHandler onPreTsReceive で
createExternalCpは意味ない
setRequestOptionが重複してる
--------------------------------------------------------------------
rec reserveにreasonがほしい
--------------------------------------------------------------------
externalCpで notify対応
--------------------------------------------------------------------
recfsusb2i を別repoで
--------------------------------------------------------------------
threadmgr ST_SRC_INFOに thread_idx, seq_idxをいれる  リクエストしてきた人だれだか分かるように


[processed list]
--------------------------------------------------------------------
psisiMgrで各psisiのtable instanceポインタのvectorを持つほうがいい
各psisiのtableクラスでdumpTable
psisiMgrでdumpTables
--------------------------------------------------------------------
event chenge notify
  cacheEventPfInfos -> checkEventPfInfosで印付け -> followsが空だったら follow eventをcopy
  followsをloopcheck -> start_timeで notify -> follows clear
  選局で follows clear
--------------------------------------------------------------------
thread dumpにいろいろ追加する
--------------------------------------------------------------------
threadmgr lock機構 (lockしたまま同threadの別seqをrequestした時どうするか)
--------------------------------------------------------------------
loglevel Debug追加
--------------------------------------------------------------------
event rec
--------------------------------------------------------------------
log エスケープシーケンス 色つけ方
--------------------------------------------------------------------
command serverのstack テンプレートクラス化
--------------------------------------------------------------------
chennel scan
--------------------------------------------------------------------
version_numberのチェックはpsisiManagerでやるか考える
   -> 各parser側でやる
--------------------------------------------------------------------
notify clientのdump threadmgr
--------------------------------------------------------------------
EPG on/offのスイッチ
--------------------------------------------------------------------
eit scheduleはsectionのリスト管理しないで 派生クラスでテーブル管理する
   p/f はsectionリスト管理して重複はチェックする
   -> バッファサイズとfifo数はそんなに必要ないはず
--------------------------------------------------------------------
onSectionStarted がfalse return だったらそのsectionは無視する 次のsection開始まで
   -> eit p/f とscheduleは別クラスで onSectionStartedでtable_idチェックして切りわけ
--------------------------------------------------------------------
scan 結果重複チェック
--------------------------------------------------------------------
rec終了時 tune stopしとく
--------------------------------------------------------------------
log ファイル出力どうする
   -> syslogに出す
--------------------------------------------------------------------
cereal json対応
--------------------------------------------------------------------
rec reserveにnetwork_nameいれるか
   -> service_nameで対応
--------------------------------------------------------------------
選局失敗したらリトライする ラップ選局ほしい at channel mgr
   -> rec中にPAT途絶したら再選局したい retryx3
--------------------------------------------------------------------
get_ts_name  get_service_name等がほしいかも
   -> rec reserveにservice_name をいれた
--------------------------------------------------------------------
commoand_serverのログ出力
--------------------------------------------------------------------
sched map dumpを対話モード
--------------------------------------------------------------------
前の番組が伸びて イベント追従した時 check_loopで予約を確認したとき scheduleが古いままなので戻ってしまう
schedule cacheし直し or scheduleは見ないようにする
前の番組が伸びた直後の番組でなく後続につづく番組に対して対応できてない...
   -> schedule cacheし直し
--------------------------------------------------------------------
tsパケット自体(188bytes)をリクエストメッセージで送りつけるやりかた
--------------------------------------------------------------------
EPG 予約
--------------------------------------------------------------------
EPG retry
--------------------------------------------------------------------
録画とEPGの排他
--------------------------------------------------------------------
event searchは過ぎていたeventは予約しない
 -> event search側でチェックする
--------------------------------------------------------------------
daemon化
 -> systemdを使用 プロセスの実装自体はフォアグラウンドプロセス
--------------------------------------------------------------------
command serverのログも保存したい
--------------------------------------------------------------------
imguiつかってみたい
  -> OpenGL環境を作らないといけない 一旦やめにした
--------------------------------------------------------------------
rec reserve のend time と次のstart timeは同じでもかぶっているとみなさない

